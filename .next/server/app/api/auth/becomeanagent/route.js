(()=>{var e={};e.id=236,e.ids=[236],e.modules={56037:e=>{"use strict";e.exports=require("mongoose")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},55511:e=>{"use strict";e.exports=require("crypto")},26888:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>x,routeModule:()=>y,serverHooks:()=>S,workAsyncStorage:()=>l,workUnitAsyncStorage:()=>m});var s={};r.r(s),r.d(s,{GET:()=>g,POST:()=>d});var n=r(42706),a=r(28203),i=r(45994),o=r(39187),u=r(1121),p=r(88827),c=r(34926);async function d(e){await (0,u.A)();let{title:t,name:r,email:s,phoneNumber:n,password:a,country:i,address:d,city:g,province:y,postalCode:l,certificateType:m,certificateNumber:S,message:x,referredBy:v,role:q,numberOfAgents:w,agencyType:f}=await e.json();try{if(await p.A.findOne({email:s}))return o.NextResponse.json({message:"Agent already exists"},{status:400});let e=await c.Ay.genSalt(10),u=await c.Ay.hash(a,e),h=new p.A({title:t,name:r,email:s,phoneNumber:n,password:u,country:i,address:d,city:g,province:y,postalCode:l,certificateType:m,certificateNumber:S,message:x,referredBy:v,role:q,numberOfAgents:w,agencyType:f});return await h.save(),o.NextResponse.json({message:"Agent created successfully",agent:h},{status:201})}catch(e){return console.error("Error in POST function:",e),o.NextResponse.json({message:"Internal server error"},{status:500})}}async function g(){try{await (0,u.A)();let e=await p.A.find({});return o.NextResponse.json({agents:e},{status:200})}catch(e){return console.error("Error fetching agents:",e),o.NextResponse.json({message:"Internal server error"},{status:500})}}let y=new n.AppRouteRouteModule({definition:{kind:a.RouteKind.APP_ROUTE,page:"/api/auth/becomeanagent/route",pathname:"/api/auth/becomeanagent",filename:"route",bundlePath:"app/api/auth/becomeanagent/route"},resolvedPagePath:"C:\\Users\\jasha\\Downloads\\overseas\\travel_yt\\app\\api\\auth\\becomeanagent\\route.js",nextConfigOutput:"",userland:s}),{workAsyncStorage:l,workUnitAsyncStorage:m,serverHooks:S}=y;function x(){return(0,i.patchFetch)({workAsyncStorage:l,workUnitAsyncStorage:m})}},96487:()=>{},78335:()=>{},1121:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var s=r(56037);let n=async()=>{s.connections[0].readyState||await s.connect(process.env.MONGODB_URI)}},88827:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var s=r(56037);let n=new s.Schema({title:{type:String,required:!0},name:{type:String,required:!0},email:{type:String,required:!0,unique:!0},phoneNumber:{type:String,required:!0},password:{type:String,required:!0},country:{type:String,required:!0},address:{type:String,required:!0},city:{type:String,required:!0},province:{type:String,required:!0},postalCode:{type:String,required:!0},certificateType:{type:String,required:!0},certificateNumber:{type:String,required:!0},message:{type:String},referredBy:{type:String},role:{type:String,default:"agent"},numberOfAgents:{type:Number},agencyType:{type:String},verified:{type:Boolean,default:!1}}),a=s.models.Agent||s.model("Agent",n)}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[989,452,926],()=>r(26888));module.exports=s})();