(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[72],{5789:(e,t,s)=>{Promise.resolve().then(s.bind(s,2434))},2434:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var r=s(5155),a=s(2651),l=s(7396),o=s(6046),n=s(2115),i=s(5037);function c(){let e=(0,o.useRouter)(),[t,s]=(0,n.useState)(""),[c,d]=(0,n.useState)(""),[u,m]=(0,n.useState)(!1),[g,h]=(0,n.useState)(!1);(0,n.useEffect)(()=>{h("true"===localStorage.getItem("isLoggedIn"))},[]);let x=async s=>{s.preventDefault(),m(!0);try{let s=await a.A.post("/api/auth/login",{email:t,password:c});if(200===s.status){let{token:t,user:r}=s.data;localStorage.setItem("isLoggedIn","true"),localStorage.setItem("token",t),localStorage.setItem("role",r.role),h(!0),i.Ay.success("Login successful!"),e.push("agent"===r.role?"/agent":"admin"===r.role?"/admin":"/dashboard")}}catch(e){if(a.A.isAxiosError(e)){var r,l;i.Ay.error((null===(l=e.response)||void 0===l?void 0:null===(r=l.data)||void 0===r?void 0:r.message)||"An error occurred. Please try again.")}}finally{m(!1)}};return(0,r.jsxs)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-r from-gray-400 to-blue-950",children:[(0,r.jsx)(i.l$,{position:"top-center",reverseOrder:!1}),(0,r.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow-lg w-full max-w-md",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold mb-6 text-gray-800 text-center",children:"Login to Your Account"}),g?(0,r.jsx)("div",{className:"flex items-center justify-center",children:(0,r.jsx)("button",{onClick:()=>{localStorage.removeItem("isLoggedIn"),localStorage.removeItem("token"),localStorage.removeItem("role"),h(!1),e.push("/login"),i.Ay.success("Logged out successfully!")},className:"flex items-center justify-center p-2 rounded-full bg-gray-200 hover:bg-gray-300","aria-label":"Logout",children:(0,r.jsx)("span",{className:"text-gray-700",children:"\uD83D\uDC64"})})}):(0,r.jsxs)("form",{onSubmit:x,className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),(0,r.jsx)("input",{type:"email",id:"email",name:"email",placeholder:"Enter your email",value:t,onChange:e=>s(e.target.value),className:"mt-1 block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,disabled:u})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),(0,r.jsx)("input",{type:"password",id:"password",name:"password",placeholder:"Enter your password",value:c,onChange:e=>d(e.target.value),className:"mt-1 block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,disabled:u})]}),(0,r.jsx)("div",{children:(0,r.jsx)("button",{type:"submit",disabled:u,className:"block w-full text-center rounded px-14 md:px-28 -mt-4 py-2.5 overflow-hidden group bg-rose-600 relative hover:bg-gradient-to-r hover:from-red-500 hover:to-red-400 text-white hover:ring-2 hover:ring-offset-2 hover:ring-red-400 transition-all ease-out duration-300",children:u?(0,r.jsxs)("span",{className:"flex items-center justify-center",children:[(0,r.jsxs)("svg",{className:"animate-spin h-5 w-5 mr-2 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4l3-3-3-3v4a8 8 0 00-8 8h4z"})]}),"Logging in..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"absolute right-0 w-8 h-32 -mt-12 transition-all duration-1000 transform translate-x-12 bg-white opacity-10 rotate-12 group-hover:-translate-x-40 ease"}),(0,r.jsx)("span",{className:"relative font-bold",children:"Login"})]})})})]}),!g&&(0,r.jsx)("div",{className:"mt-6 text-center",children:(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["Don't have an account?"," ",(0,r.jsx)(l.default,{href:"/auth/signup",className:"text-blue-600 hover:underline",children:"Sign up"})]})})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[2651,8216,7396,8441,1517,7358],()=>t(5789)),_N_E=e.O()}]);